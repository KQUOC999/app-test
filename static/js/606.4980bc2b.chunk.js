"use strict";(self.webpackChunkapp_test=self.webpackChunkapp_test||[]).push([[606],{5606:(t,o,n)=>{n.r(o),n.d(o,{default:()=>m});var s=n(5043),e=n(3402),a=n(6244),c=n(443),i=n(5475),r=n(579);const l=new e.qw({id:{NODE_ENV:"production",PUBLIC_URL:"/app-test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_REALM_ID}),d=l.currentUser,u={title:"Register",type:"object",required:["email","password"],properties:{email:{type:"string",title:"Email",format:"email"},password:{type:"string",title:"Password",minLength:6,format:"password"}}},h={title:"Login",type:"object",required:["email","password"],properties:{email:{type:"string",title:"Email",format:"email"},password:{type:"string",title:"Password",minLength:6,format:"password"}}},m=()=>{const[t,o]=(0,s.useState)({}),[n,m]=(0,s.useState)(),[p,g]=(0,s.useState)(!1),[y,v]=(0,s.useState)([]),[w,j]=(0,s.useState)(!0),[x,S]=(0,s.useState)(0),[b,N]=(0,s.useState)([]),[,_]=(0,s.useState)({}),[,f]=(0,s.useState)({});(0,s.useEffect)((()=>{A()}),[]);const A=async()=>{try{var t,n,s;const e=await d.callFunction("module");o(null===(t=e[0])||void 0===t||null===(n=t.public)||void 0===n||null===(s=n.input)||void 0===s?void 0:s.jsonSchema),console.log(e)}catch(e){console.log(e.error)}};(0,s.useEffect)((()=>{k()}),[]);const k=async()=>{try{const t="getAllProducts",o=await l.currentUser.callFunction(t);v(o),j(!1)}catch(t){console.log(t.error),j(!1)}},E=async t=>{try{const o=await l.currentUser.callFunction("getCart",t);return C(o)}catch(o){throw console.error("L\u1ed7i khi l\u1ea5y th\xf4ng tin s\u1ea3n ph\u1ea9m:",o),o}},C=t=>{const o=new WeakSet;return JSON.parse(JSON.stringify(t,((t,n)=>{if("object"===typeof n&&null!==n){if(o.has(n))return;o.add(n)}return n})))};return(0,r.jsx)("div",{children:d?(0,r.jsxs)("div",{children:["home",(0,r.jsx)("button",{className:"btn_button",onClick:async()=>{try{await d.logOut(),console.log("\u0110\u0103ng xu\u1ea5t th\xe0nh c\xf4ng:"),window.location.reload(!0)}catch(t){console.log(t.error)}},children:"\u0110\u0103ng xu\u1ea5t"}),(0,r.jsx)("button",{className:"btn_button",onClick:async()=>{try{const t=await d.callFunction("get");console.log(t)}catch(t){console.log(t.error)}},children:"G\u1ecdi Function"}),(0,r.jsx)(a.Ay,{schema:t,validator:c.Ay,onSubmit:async t=>{const o=[null===t||void 0===t?void 0:t.formData,d.id];try{var n,s,e,a,c,i;const t=await d.callFunction("SUMAB",...o);m(null===(n=t[0])||void 0===n||null===(s=n.public)||void 0===s||null===(e=s.output)||void 0===e?void 0:e.total),console.log(null===(a=t[0])||void 0===a||null===(c=a.public)||void 0===c||null===(i=c.output)||void 0===i?void 0:i.total),console.log(t)}catch(r){console.log(r.error)}}}),(0,r.jsxs)("p",{children:["K\u1ebft qu\u1ea3 l\xe0: ",n]}),w?(0,r.jsx)("p",{children:"\u0110ang t\u1ea3i s\u1ea3n ph\u1ea9m..."}):(0,r.jsxs)("div",{className:"product",children:[(0,r.jsx)("div",{className:"cart-icon",children:(0,r.jsxs)(i.N_,{to:"/cart",children:[(0,r.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRNjsW9hOm9ohsN9Mzhpc-BA-L1hRFAX_GV_rpBrO3GDbrniV0UUD76niBFTA&s",alt:"img_cart_icon"}),(0,r.jsx)("span",{className:"cart-count",children:x})]})}),(0,r.jsx)("ul",{children:y.map((t=>(0,r.jsxs)("li",{children:[(0,r.jsx)("img",{src:t.imageUrl,alt:t.productName}),(0,r.jsx)("h2",{children:t.productName}),(0,r.jsx)("p",{children:t.productType}),(0,r.jsxs)("p",{children:["Gi\xe1: $",t.sellingPrice]}),(0,r.jsxs)("p",{children:["S\u1ed1 l\u01b0\u1ee3ng: ",t.quantity]}),(0,r.jsx)("button",{className:"add-to-cart-btn",onClick:()=>(async t=>{try{const o=await E(t);if(!o)throw new Error("Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin s\u1ea3n ph\u1ea9m.");console.log("Th\xf4ng tin s\u1ea3n ph\u1ea9m...:",o),S(x+1),N([...b,{id:o._id,productName:o.productName}]),_((o=>{const n={...o};return n[t]=(n[t]||0)+1,n})),f((t=>({...t})))}catch(o){console.error("L\u1ed7i khi th\xeam v\xe0o gi\u1ecf h\xe0ng:",o)}})(t._id),children:"Th\xeam v\xe0o gi\u1ecf h\xe0ng"})]},t._id)))})]}),";"]}):(0,r.jsx)("div",{className:"overlay-container",children:(0,r.jsx)("div",{className:"overlay-content",children:(0,r.jsx)("div",{className:"container",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"button",onClick:()=>g(!1),children:"Quay l\u1ea1i"}),(0,r.jsx)(a.Ay,{className:"custom-form",schema:u,validator:c.Ay,onSubmit:async t=>{const{email:o,password:n}=null===t||void 0===t?void 0:t.formData;try{await l.emailPasswordAuth.registerUser({email:o,password:n}),console.log("\u0110\u0103ng k\xfd th\xe0nh c\xf4ng"),window.location.reload(!0)}catch(s){console.log(s.error)}}})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"button",onClick:()=>g(!0),children:"\u0110\u0103ng k\xfd"}),(0,r.jsx)(a.Ay,{className:"custom-form",schema:h,validator:c.Ay,onSubmit:async t=>{const{email:o,password:n}=null===t||void 0===t?void 0:t.formData;try{const t=e.Ji.emailPassword(o,n);await l.logIn(t),console.log("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng:"),window.location.reload(!0)}catch(s){console.log(s.error),window.alert("Sai th\xf4ng tin \u0111\u0103ng nh\u1eadp!")}}})]})})})})})}}}]);
//# sourceMappingURL=606.4980bc2b.chunk.js.map