"use strict";(self.webpackChunkapp_test=self.webpackChunkapp_test||[]).push([[606],{5606:(t,n,o)=>{o.r(n),o.d(n,{default:()=>m});var s=o(5043),e=o(3402),a=o(6244),c=o(443),l=o(5475),r=o(579);const i=new e.qw({id:"app-test-dnvhs"}),d=i.currentUser,u={title:"Register",type:"object",required:["email","password"],properties:{email:{type:"string",title:"Email",format:"email"},password:{type:"string",title:"Password",minLength:6,format:"password"}}},h={title:"Login",type:"object",required:["email","password"],properties:{email:{type:"string",title:"Email",format:"email"},password:{type:"string",title:"Password",minLength:6,format:"password"}}},m=()=>{const[t,n]=(0,s.useState)({}),[o,m]=(0,s.useState)(),[p,g]=(0,s.useState)(!1),[y,w]=(0,s.useState)([]),[v,j]=(0,s.useState)(!0),[x,b]=(0,s.useState)(0),[N,f]=(0,s.useState)([]),[,S]=(0,s.useState)({}),[,k]=(0,s.useState)({});(0,s.useEffect)((()=>{A()}),[]);const A=async()=>{try{var t,o,s;const e=await d.callFunction("module");n(null===(t=e[0])||void 0===t||null===(o=t.public)||void 0===o||null===(s=o.input)||void 0===s?void 0:s.jsonSchema),console.log(e)}catch(e){console.log(e.error)}};(0,s.useEffect)((()=>{_()}),[]);const _=async()=>{try{const t="getAllProducts",n=await i.currentUser.callFunction(t);w(n),j(!1)}catch(t){console.log(t.error),j(!1)}},F=async t=>{try{const n=await i.currentUser.callFunction("getCart",t);return C(n)}catch(n){throw console.error("L\u1ed7i khi l\u1ea5y th\xf4ng tin s\u1ea3n ph\u1ea9m:",n),n}},C=t=>{const n=new WeakSet;return JSON.parse(JSON.stringify(t,((t,o)=>{if("object"===typeof o&&null!==o){if(n.has(o))return;n.add(o)}return o})))};return(0,r.jsx)("div",{children:d?(0,r.jsxs)("div",{children:["home",(0,r.jsx)("button",{className:"btn_button",onClick:async()=>{try{await d.logOut(),console.log("\u0110\u0103ng xu\u1ea5t th\xe0nh c\xf4ng:"),window.location.reload(!0)}catch(t){console.log(t.error)}},children:"\u0110\u0103ng xu\u1ea5t"}),(0,r.jsx)("button",{className:"btn_button",onClick:async()=>{try{const t=await d.callFunction("get");console.log(t)}catch(t){console.log(t.error)}},children:"G\u1ecdi Function"}),(0,r.jsx)(a.Ay,{schema:t,validator:c.Ay,onSubmit:async t=>{const n=[null===t||void 0===t?void 0:t.formData,d.id];try{var o,s,e,a,c,l;const t=await d.callFunction("SUMAB",...n);m(null===(o=t[0])||void 0===o||null===(s=o.public)||void 0===s||null===(e=s.output)||void 0===e?void 0:e.total),console.log(null===(a=t[0])||void 0===a||null===(c=a.public)||void 0===c||null===(l=c.output)||void 0===l?void 0:l.total),console.log(t)}catch(r){console.log(r.error)}}}),(0,r.jsxs)("p",{children:["K\u1ebft qu\u1ea3 l\xe0: ",o]}),v?(0,r.jsx)("p",{children:"\u0110ang t\u1ea3i s\u1ea3n ph\u1ea9m..."}):(0,r.jsxs)("div",{className:"product",children:[(0,r.jsx)("div",{className:"cart-icon",children:(0,r.jsxs)(l.N_,{to:"/cart",children:[(0,r.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRNjsW9hOm9ohsN9Mzhpc-BA-L1hRFAX_GV_rpBrO3GDbrniV0UUD76niBFTA&s",alt:"img_cart_icon"}),(0,r.jsx)("span",{className:"cart-count",children:x})]})}),(0,r.jsx)("ul",{children:y.map((t=>(0,r.jsxs)("li",{children:[(0,r.jsx)("img",{src:t.imageUrl,alt:t.productName}),(0,r.jsx)("h2",{children:t.productName}),(0,r.jsx)("p",{children:t.productType}),(0,r.jsxs)("p",{children:["Gi\xe1: $",t.sellingPrice]}),(0,r.jsxs)("p",{children:["S\u1ed1 l\u01b0\u1ee3ng: ",t.quantity]}),(0,r.jsx)("button",{className:"add-to-cart-btn",onClick:()=>(async t=>{try{const n=await F(t);if(!n)throw new Error("Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin s\u1ea3n ph\u1ea9m.");console.log("Th\xf4ng tin s\u1ea3n ph\u1ea9m...:",n),b(x+1),f([...N,{id:n._id,productName:n.productName}]),S((n=>{const o={...n};return o[t]=(o[t]||0)+1,o})),k((t=>({...t})))}catch(n){console.error("L\u1ed7i khi th\xeam v\xe0o gi\u1ecf h\xe0ng:",n)}})(t._id),children:"Th\xeam v\xe0o gi\u1ecf h\xe0ng"})]},t._id)))})]}),";"]}):(0,r.jsx)("div",{className:"overlay-container",children:(0,r.jsx)("div",{className:"overlay-content",children:(0,r.jsx)("div",{className:"container",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"button",onClick:()=>g(!1),children:"Quay l\u1ea1i"}),(0,r.jsx)(a.Ay,{className:"custom-form",schema:u,validator:c.Ay,onSubmit:async t=>{const{email:n,password:o}=null===t||void 0===t?void 0:t.formData;try{await i.emailPasswordAuth.registerUser({email:n,password:o}),console.log("\u0110\u0103ng k\xfd th\xe0nh c\xf4ng"),window.location.reload(!0)}catch(s){console.log(s.error)}}})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"button",onClick:()=>g(!0),children:"\u0110\u0103ng k\xfd"}),(0,r.jsx)(a.Ay,{className:"custom-form",schema:h,validator:c.Ay,onSubmit:async t=>{const{email:n,password:o}=null===t||void 0===t?void 0:t.formData;try{const t=e.Ji.emailPassword(n,o);await i.logIn(t),console.log("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng:"),window.location.reload(!0)}catch(s){console.log(s.error),window.alert("Sai th\xf4ng tin \u0111\u0103ng nh\u1eadp!")}}})]})})})})})}}}]);
//# sourceMappingURL=606.b07492dd.chunk.js.map