"use strict";(self.webpackChunkapp_test=self.webpackChunkapp_test||[]).push([[942],{77942:(t,e,s)=>{s.r(e),s.d(e,{default:()=>p});var r=s(82483),a=s(11299),n=s(17964),i=s(24235),c=s(99891),o=s(56723);const l=new a.qw({id:"app-test-dnvhs"}),d=l.currentUser,m={title:"Register",type:"object",required:["email","password"],properties:{email:{type:"string",title:"Email",format:"email"},password:{type:"string",title:"Password",minLength:6,format:"password"}}},h={title:"Login",type:"object",required:["email","password"],properties:{email:{type:"string",title:"Email",format:"email"},password:{type:"string",title:"Password",minLength:6,format:"password"}}},p=()=>{const[t,e]=(0,r.useState)(!1),[s,p]=(0,r.useState)([]),[u,g]=(0,r.useState)(!0),[w,y]=(0,r.useState)(0),[j,x]=(0,r.useState)([]),[,N]=(0,r.useState)({}),[,f]=(0,r.useState)({});(0,r.useEffect)((()=>{d&&v()}),[]);const v=async()=>{try{const t="getAllProducts",e=await l.currentUser.callFunction(t);p(e),g(!1)}catch(t){console.log(t.error),g(!1)}},b=async t=>{try{const e=await l.currentUser.callFunction("getCart",t);return S(e)}catch(e){throw console.error("L\u1ed7i khi l\u1ea5y th\xf4ng tin s\u1ea3n ph\u1ea9m:",e),e}},S=t=>{const e=new WeakSet;return JSON.parse(JSON.stringify(t,((t,s)=>{if("object"===typeof s&&null!==s){if(e.has(s))return;e.add(s)}return s})))};return(0,o.jsx)("div",{children:d?(0,o.jsx)("div",{children:u?(0,o.jsx)("p",{children:"\u0110ang t\u1ea3i s\u1ea3n ph\u1ea9m..."}):(0,o.jsxs)("div",{className:"product",children:[(0,o.jsx)("div",{className:"cart-icon",children:(0,o.jsxs)(c.N_,{to:"/cart",children:[(0,o.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRNjsW9hOm9ohsN9Mzhpc-BA-L1hRFAX_GV_rpBrO3GDbrniV0UUD76niBFTA&s",alt:"img_cart_icon"}),(0,o.jsx)("span",{className:"cart-count",children:w})]})}),(0,o.jsx)("ul",{children:s.map((t=>(0,o.jsxs)("li",{children:[(0,o.jsx)("img",{src:t.imageUrl,alt:t.productName}),(0,o.jsx)("h2",{children:t.productName}),(0,o.jsx)("p",{children:t.productType}),(0,o.jsxs)("p",{children:["Gi\xe1: $",t.sellingPrice]}),(0,o.jsxs)("p",{children:["S\u1ed1 l\u01b0\u1ee3ng: ",t.quantity]}),(0,o.jsx)("button",{className:"add-to-cart-btn",onClick:()=>(async t=>{try{const e=await b(t);if(!e)throw new Error("Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin s\u1ea3n ph\u1ea9m.");y(w+1),x([...j,{id:e._id,productName:e.productName}]),N((e=>{const s={...e};return s[t]=(s[t]||0)+1,s})),f((t=>({...t})))}catch(e){console.error("L\u1ed7i khi th\xeam v\xe0o gi\u1ecf h\xe0ng:",e)}})(t._id),children:"Th\xeam v\xe0o gi\u1ecf h\xe0ng"})]},t._id)))})]})}):(0,o.jsx)("div",{className:"overlay-container",children:(0,o.jsx)("div",{className:"overlay-content",children:(0,o.jsx)("div",{className:"container_form",children:t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:"button1",onClick:()=>e(!1),children:"Quay l\u1ea1i"}),(0,o.jsx)(n.Ay,{className:"custom-form",schema:m,validator:i.Ay,onSubmit:async t=>{const{email:e,password:s}=null===t||void 0===t?void 0:t.formData;try{await l.emailPasswordAuth.registerUser({email:e,password:s}),window.location.reload(!0)}catch(r){console.log(r.error)}}})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:"button1",onClick:()=>e(!0),children:"\u0110\u0103ng k\xfd"}),(0,o.jsx)(n.Ay,{className:"custom-form",schema:h,validator:i.Ay,onSubmit:async t=>{const{email:e,password:s}=null===t||void 0===t?void 0:t.formData;try{const t=a.Ji.emailPassword(e,s);await l.logIn(t),window.location.reload(!0)}catch(r){console.log(r.error)}}})]})})})})})}}}]);
//# sourceMappingURL=942.3ff50478.chunk.js.map